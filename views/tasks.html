<!doctype html>
<html class="no-js" lang="en" ng-app='clutchApp'>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clutch</title>
    <link rel="stylesheet" href="../css/foundation.css" />
    <!-- Do not change name of this file (app.css) -->
    <link rel="stylesheet" href="../css/app.css">
    <script src="../js/vendor/modernizr.js"></script>    
    <script src="angular/angular.js"></script>  
    <script type = 'text/javascript' src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular-cookies.js"></script>
    <script type = 'text/javascript' src="angular/app.js"></script>  

  </head>
  <body ng-controller="taskController" class='offwhite-background'>
    <!-- Include Navbar -->
    <div loadnavbar></div>  

    <div class="row">
      <h1  class="large-12 columns black-background">{{projectName}}</h1>
    </div>

    <dl class="row tabs" data-tab>
      <dd class="active"><a href="#panel3">Announcements</a></dd>
      <dd><a href="#panel1">Shots</a></dd>
      <dd><a href="#panel2">Assets</a></dd>
    </dl>

    <div class="tabs-content">
      <!-- Announcements tab -->
      <div class="content active" id="panel3">
        <div class="row">
          <a class="left" ng-click='postAnnTextBox = !postAnnTextBox' ng-show='postAnnTextBox == false'><font size="2.5">+ New Announcement</font></a><br><br>
          <a class="left" ng-click='postAnnTextBox = !postAnnTextBox' ng-show='postAnnTextBox == true'><font size="2.5">- Hide</font></a>
            <textarea rows="2" placeholder="New Announcement..." class="large-4 columns left" ng-model='message' ng-show='postAnnTextBox'></textarea>
            <button class="small button" ng-click="postAnnouncement();postAnnTextBox = !postAnnTextBox;" ng-show='postAnnTextBox'>Post</button>
        </div>


        <div class="row">
          <div class="large-12 columns" ng-repeat='ann in announcements|limitTo:announcementsLimit'>
            <div class="panel">
              <h6>{{ann.message}}</h6>
              <h6 class="right">{{ann.time | date:'MM/dd/yyyy HH:mm:ss'}}</h6>
            </div>
          </div>
          <div ng-if='announcementsLimit > 5'>
            <a ng-click='seeLess()'><font size="2.5">See fewer announcements...</font></a>
          </div>
          <div ng-show='announcementsLimit != announcements.length'>
            <a ng-click='seeMore()'><font size="2.5">See older announcements...</font></a>
          </div>
        </div>
      </div>

      <!-- this is the shots tab -->
      <div class="content" id="panel1">
        <div class="row">    
            <div class="large-2 columns right">
              <div class="row collapse">
                <a ng-click="showForm()" class="tiny expand button navbar-button">Add Sequence</a><br/>
              </div>
            </div>
            <div class="large-2 columns right" ng-class="{'fadein':visible , 'fadeout':!visible}">
              <div class="row collapse">
                <div class="small-9 columns">
                  <input class="blue-input" type="text" placeholder="Title" ng-model="title" ng-class="{'has-error' : attempted}">
                </div>
                <div class="small-3 columns">
                  <a href="#" class="button postfix signUp-button" ng-click="addSequence()" >+</a>
                </div>
              </div>
            </div>
        </div>

        <div class='row'>
          <a class='accordion row' ng-repeat="seq in sequences" ng-click="toggleSeq(seq)">
            <table class="table large-12 columns" >
              <th> Sequence {{seq.name}}: </th>
              <th> Previs</th>
              <th> Animator</th>
              <th> Lighter</th>
              <th> Rendering</th>
              <th> FX </th>
              <th> Compositing</th>
            </table>
            <ul>
              <div ng-repeat="shot in getShots(seq)" ng-click='toggleSeq(seq)'>
                <button ng-show='showSeq(seq)' class="small round button shot-button dropdown" data-dropdown="shotinfo">{{shot.name}}</button>
                <button ng-show='showSeq(seq)' class="notes-button dropdown" data-dropdown='notesDrop'>Notes</button>
                <button ng-show='showSeq(seq)' style="width:121px"class="shot-button-others button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,previs)'>{{getPrevis(shot.id)}}</button>
                <button ng-show='showSeq(seq)' style="width:128px" class="shot-button-others button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,animator)'>{{getAnimator(shot.id)}}</button>
                <button ng-show='showSeq(seq)' style="width:124px" class="shot-button-others button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,lighter)'>{{getLighter(shot.id)}}</button>
                <button ng-show='showSeq(seq)' style="width:133px" ng-show='showSeq(seq)' class="shot-button-others button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,wrangler)'>{{getWrangler(shot.id)}}</button>
                <button ng-show='showSeq(seq)' style="width:110px;padding-right:5px;" class="shot-button-others button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,fx)'>{{getFX(shot.id)}}</button>
                <button ng-show='showSeq(seq)' style="width:141px" class="shot-button-others button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,fx)'>{{getCompositing(shot.id)}}</button>
              </div>
            </ul>
            <div ng-show='showSeq(seq)' class="row">
              <div class="large-2 columns right">
                  <button class="tiny expand button navbar-button" ng-click="showShotForm();toggleSeq(seq)">Add Shot</button>
              </div>
              <div class="large-10 columns right" ng-class="{'fadein':shotVisible , 'fadeout':!shotVisible}">
                <div class="small-3 columns">
                  <input ng-click='toggleSeq(seq)'class="blue-input" type="text" placeholder="Title" ng-model="shotTitle" ng-class="{'has-error' : shotAttempted}">
                </div>
                <div class="small-8 columns">
                  <input ng-click='toggleSeq(seq)'class="blue-input" type="text" placeholder="Description" ng-model="shotDesc" ng-class="{'has-error' : shotAttempted}">
                </div>
                <div class="small-1 columns">
                  <button ng-click='toggleSeq(seq)'href="#" class="button postfix signUp-button" ng-click="addShot(seq)" >+</button>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>

      <!-- this is the assets tab -->
      <div class="content" id="panel2">
        <div class='row'>   
            <div class="row">    
              <div class="large-2 columns left">
                <div class="row collapse">
                  <a ng-click="showForm()" class="tiny expand button navbar-button">Add Asset</a><br/>
                </div>
              </div>
              <div class="large-2 columns left" ng-class="{'fadein':visible , 'fadeout':!visible}">
                <div class="row collapse">
                  <div class="small-3 columns">
                    <a href="#" class="button postfix signUp-button" ng-click="addAsset()">+</a>
                  </div>
                  <div class="small-9 columns">
                    <input class="blue-input" type="text" placeholder="Title" ng-model="assetTitle" ng-class="{'has-error' : attempted}">
                  </div>
                </div>
              </div>
            </div>

          <a class='accordion row' ng-repeat="ass in assets" ng-click="toggleAsset(ass)">
            <table class="asset-table" >
              <th>  {{ass.name}}: </th>
              <th>  Modeling</th>
              <th>  Shading</th>
              <th>  Rigging</th>
            </table>
            <ul class="no-margin" ng-show="showAssets(ass)" >
              <div class="no-margin" ng-click='toggleAsset(ass)'>
                <br><br><button class="asset-note-button dropdown" data-dropdown='notesDrop'>Notes</button>
                <button style="width:128px"class="asset-other-button button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,modeling)'>{{getModeling(ass.id)}}</button>
                <button style="width:126px" class="asset-other-button button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,shading)'>{{getShading(ass.id)}}</button>
                <button style="width:128px" class="asset-other-button button dropdown" data-dropdown="drop" aria-controls="drop", aria-expanded="false" ng-click='currentDropDown(seq,shot,rigging)'>{{getRigging(ass.id)}}</button>
              </div>
            </ul>
          </a>
        </div>
      </div>
    </div>

    <ul id="drop" data-dropdown-content class="f-dropdown" role="menu", aria-hidden="false" >
      <li><input type="text" placeholder="Assign to"><a href="" class="button postfix black-button">Assign</a></li>
      <div class='panel' ng-repeat="note in notes">
        <p>{{note.note}}</p>
        <p class="right">~{{note.fname}} {{note.lname}}</p>
        <p class="right">{{note.time}}</p>
      </div>
    </ul>

    <ul id="notesDrop" data-dropdown-content class="f-dropdown" role="menu", aria-hidden="false">
      <li><input type="text" placeholder="Assign to"><a href="" class="button postfix black-button">Assign</a></li>
      <div class='panel' ng-repeat="note in notes">
        <p>{{note.note}}</p>
        <p class="right">~{{note.fname}} {{note.lname}}</p>
        <p class="right">{{note.time}}</p>
      </div>
    </ul>

<!-- <button data-dropdown="drop" aria-controls="drop" aria-expanded="false" class="large alert round button dropdown">Dropdown Button</button><br>
<ul id="drop" data-dropdown-content class="f-dropdown" role="menu" aria-hidden="false" tabindex="-1">
  <li><a href="#">This is a link</a></li>
  <li><a href="#">This is another</a></li>
  <li><a href="#">Yet another</a></li>
</ul> -->

    <script src="../js/vendor/jquery.js"></script>
    <script src="../js/foundation.min.js"></script>

    <script>
      $(document).foundation();
    </script>



  </body>
</html>